<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pagamento - Padaria Medeiros</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
<header>
  <h1>Padaria Medeiros</h1>
  <nav>

    <a href="produtos.html">Produtos</a>
    <a href="carrinho.html">Carrinho</a>
    <a href="sobre.html">Sobre</a>
  </nav>
</header>

<main>
  <h2>üí≥ Escolha a forma de pagamento</h2>

  <div class="pagamentos">
    <button onclick="mostrarPix()">Pix</button>

    <button onclick="mostrarDinheiro()">Dinheiro</button>
  </div>

  <!-- PIX -->
  <div id="pix-section">
    <h3>üì± Pague com Pix</h3>
    <p>Escaneie o QR Code abaixo:</p>
    <img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=PadariaMedeirosPIX123"
         alt="QR Code Pix" class="qrcode">
    <p><strong>Chave Pix:</strong> 059.703.791-40</p>
    <button onclick="finalizar()">‚úÖ Confirmar Pagamento</button>
  </div>

  <!-- DINHEIRO -->
  <div id="dinheiro-section">
    <h3>üíµ Pagamento em Dinheiro</h3>
    <p>Total da compra: <strong id="total-compra">R$ 0,00</strong></p>
    <label>Quanto vai pagar? </label>
    <input type="number" id="valorCliente" placeholder="Ex: 50.00" step="0.01">
    <button onclick="calcularTroco()">Calcular Troco</button>
    <p id="resultadoTroco"></p>
    <button onclick="finalizar()">‚úÖ Confirmar Pagamento</button>
  </div>
</main>

<script src="pagamento.js"></script>
<script src="produtos.js"></script>
<!-- Bot√£o flutuante -->
<button id="btnPerfil" class="btn-perfil-flutuante">üë§ Ver Perfil</button>

<!-- Card do perfil -->
<div id="perfil-card" class="perfil-card" style="display: none;"></div>

<script>
  function carregarPerfil() {
    const usuario = JSON.parse(localStorage.getItem("usuario"));
    const card = document.getElementById("perfil-card");

    if (usuario) {
      card.innerHTML = `
            <h3>üë§ Perfil</h3>
            <p><strong>Nome:</strong> ${usuario.nome}</p>
            <p><strong>Cpf:</strong> ${usuario.cpf}</p>
            <p><strong>Email:</strong> ${usuario.email}</p>
            <p><strong>Telefone:</strong> ${usuario.telefone}</p>
            <p><strong>Data Nascimento:</strong> ${usuario.dataNascimento}</p>

            <a class="btn-perfil" href="cadastro.html">Editar Perfil</a>
        `;
    } else {
      card.innerHTML = `
            <h3>üë§ Perfil</h3>
            <p>Nenhum cadastro encontrado.</p>
            <a class="btn-perfil" href="cadastro.html">Cadastrar</a>
        `;
    }
  }

  window.onload = function() {
    carregarPerfil();

    const btn = document.getElementById("btnPerfil");
    const card = document.getElementById("perfil-card");

    btn.addEventListener("click", function() {
      if(card.style.display === "none" || card.style.display === "") {
        card.style.display = "block";
      } else {
        card.style.display = "none";
      }
    });
  }
  function carregarCarrinho() {
    const carrinho = JSON.parse(localStorage.getItem("carrinho")) || [];
    const container = document.getElementById("carrinho-container");
    container.innerHTML = "";
    let total = 0;

    if (carrinho.length === 0) {
      container.innerHTML = "<p>Seu carrinho est√° vazio üò¢</p>";
      document.getElementById("total").innerText = "R$ 0,00";
      return;
    }

    carrinho.forEach((item, index) => {
      const subtotal = item.qtd * item.preco;
      total += subtotal;

      const card = document.createElement("div");
      card.className = "carrinho-item";
      card.innerHTML = `
            <h4>${item.nome}</h4>
            <p>Qtd: ${item.qtd} | Pre√ßo Unit: R$ ${item.preco.toFixed(2)}</p>
            <p>Subtotal: R$ ${subtotal.toFixed(2)}</p>
            <button onclick="removerItem(${index})">‚ùå Remover</button>
        `;
      container.appendChild(card);
    });

    document.getElementById("total").innerText = "R$ " + total.toFixed(2);
  }

  function removerItem(index) {
    let carrinho = JSON.parse(localStorage.getItem("carrinho")) || [];
    carrinho.splice(index, 1);
    localStorage.setItem("carrinho", JSON.stringify(carrinho));
    carregarCarrinho();
  }

</script>



</body>
</html>
